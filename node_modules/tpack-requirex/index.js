/**
 * @fileOverview 支持打包 ES6、AMD、CMD、CommonJS、BootJs为一个文件。
 */

var Path = require('path');
var Lang = require('tealweb/lang');

/**
 * RequireJs 解析插件。
 * @this 支持扩展以下字段：
 * * @property {Boolean|Object} [sourceMap=false] 是否生成 SourceMap。如果为对象，则内部配置 SourceMap 的相关配置：
 * * * @property {Boolean} [sourceMapFileInline=false] 是否内联 SourceMap。
 * @param {ProjectFile} file 当前正在生成的文件。可用于获取文件内容和路径。
 * @param {ProjectBuilder} builder 当前生成器。存储生成的相关配置。
 * @returns {Array|String} 返回生成的内容数组。 
 */
module.exports = function (file, builder) {
    var options = Object.assign({}, this);
    var RequirePacker = require('./requirepacker.js');

    var packer = new RequirePacker();
    packer.getName = function (path) {
        return builder.getName(path);
    };
    packer.readFile = function (path) {
        return builder.process(path).content;
    };
    //packer.resolvePath = function (basePath, modulePath) {

    //};

    // packer.include(file.path);

    var result = packer.pack(file.src);

    return result;
};


